version: '3'
services:
  grafana:
    image: grafana/grafana:latest
    container_name: grafana_so1
    ports:
      - "3000:3000"
    environment:
      # Esto instala el plugin de SQLite automáticamente al iniciar
      - GF_INSTALL_PLUGINS=fr-ser-sqlite-datasource
    volumes:
      # Mapeamos el archivo de base de datos dentro del contenedor
      # IMPORTANTE: Asegúrate de que metrics.db ya exista antes de iniciar esto
      - ../go-daemon/metrics.db:/var/lib/grafana/metrics.db:ro